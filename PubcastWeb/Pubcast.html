<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">	
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/mobile.css" />
<script type="text/javascript" src="js/Populate.js"></script>

<html>

<script type="text/javascript">
	//gInitList += "View();"
    var querey=1000;
    var genomics="http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=(First)+NOT+Second+AND%20hasabstract/&reldate=10&datetype=edat&retmax="+querey+"&usehistory=y";
    var proteomics="http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=(Second)+NOT+First+AND%20hasabstract/&reldate=10&datetype=edat&retmax="+querey+"&usehistory=y";
    var opinion="http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=(((editorial[Publication%20Type])%20OR%20news[Publication%20Type]))%20AND%20hasabstract/&retmax="+querey+"&usehistory=y";
  //  var Genes="http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=";
	
    var w = window.innerWidth;
    var h = window.innerHeight;
    
  //  var dsOptions= vjDS.add("", "dsOptions", 'static://',ReturnHome);
    var IsFirst=false;
    var IsSecond=false;
    var IsThird=false;
    // set up variables for underline.
    var cell = w * .3333;
    var cellWidth = w * .2333;
  	var cellMargin = cell * .05;
  	
  	var currentX1 = cellMargin;
	var currentX2 = cell - cellMargin;
	
	var secondX1 = cell + cellMargin;
	var secondX2 = (cell * 2) - cellMargin;
	var firstX1 = cellMargin;
	var firstX2 = cell - cellMargin;
	var thirdX1 = (cell * 2) + cellMargin;
	var thirdX2 = (cell * 3) - cellMargin;
	
	var newX1 = 0;
	var newX2 = 0;
	var cnt = 0;
	var timerFunction = null;
	
	var fastSpeed = w * .038 ; // Need to set in pixles for how fast will move with each tick.
	var slowSpeed = w * .029 ;
	
	// End variables for underline.
      var url = "" + document.location;
      var $=function(v){return document.getElementById(v);}

function View(){
      var url = "" + document.location;
      var node = new Object;
          var IsFirst=true;
          var IsSecond=false;
          var IsThird=false;
        document.getElementById("tab1").style.visibility='hidden';
      	document.getElementById("tab2").style.visibility='hidden';
      	document.getElementById("tab3").style.visibility='hidden';        
        document.getElementById("First").style.zIndex=100;
      	document.getElementById("Second").style.zIndex=100;
      	document.getElementById("Third").style.zIndex=100;
      	document.getElementById("topBottomSVG").style.zIndex=200;
      	document.getElementById("super").style.zIndex=1;
      	
      	// Set up animation sizes
      
      	var _cellStart = "" + currentX1;
      	
      	var _cellEnd = "" + currentX2;
      	document.getElementById("underLine").setAttribute("x1", _cellStart); //.x1 = cellMargin;
      	document.getElementById("underLine").setAttribute("x2", _cellEnd);
    	document.getElementById("FirstLabel").style.color = "#FFF";
    	
        //document.getElementById("First").style.backgroundColor = "#3b50ce";
		document.getElementById("super").style.backgroundColor = "rgba(0,0,0,.02)";
    	        var _cellStart = "" + currentX1;
    	        var _cellEnd = "" + currentX2;
    	        document.getElementById("underLine").setAttribute("x1", _cellStart); //.x1 = cellMargin;
    	        document.getElementById("underLine").setAttribute("x2", _cellEnd);
                $("Wrapper").style.marginLeft="5%";
                $("Wrapper").style.marginRight="5%";
                
        sessionStorage.removeItem("title");
        sessionStorage.removeItem("journal");
        sessionStorage.removeItem("authors");
        sessionStorage.removeItem("date");
        sessionStorage.removeItem("abstract");
        sessionStorage.removeItem("PMID");
        sessionStorage.removeItem("affiliation");
                Parse(genomics);
}
function select(node, ir) {
    var type=node._type; 
    if(type =="svc-align-hexagon"||type=="svc-dna-screening"){
    	    var url=document.location+"&display="+type+"&id="+node.id+"&name="+node.name; 
            var tab=$(node.id).innerHTML;
    	    window.document.location=url;

    }
	
}



function animateRight() {
	
	cnt++; // Count each call into the animate function
	if (cnt > 5 && cnt <= 10) { 
		// If the call is less than the fifth time, don't do anything with x1.
		// Between 5 and 10 go moderate speed
		var _x1 = document.getElementById("underLine").getAttribute("x1");
		var _newX1 = parseInt(_x1) + slowSpeed;
		if (_newX1 <= newX1 || _x1 > newX1){ 
			document.getElementById("underLine").setAttribute("x1", _newX1);
		}
		 else {
				document.getElementById("underLine").setAttribute("x1", newX1);
			}
	} else if (cnt > 10) {
		// Greter than 10, give speed boost
		var _x1 = document.getElementById("underLine").getAttribute("x1");
		var speedBoost = slowSpeed * .1; // speedboost
		var _newX1 = parseInt(_x1) + (slowSpeed * speedBoost); // new position
		if (_newX1 <= newX1 || _x1 > newX1){ 
			// if we haven't hit the destination yet, assign the attribute
			document.getElementById("underLine").setAttribute("x1", _newX1);
		} else {
			document.getElementById("underLine").setAttribute("x1", newX1);
		}
	}
	
	// set up X2s new attribute
	var _x2 = document.getElementById("underLine").getAttribute("x2");
	var _newX2 = parseInt(_x2) + fastSpeed;
	
	if (_newX2 <= newX2 || _x2 > newX2) {
		// if we haven't hit the destination yet, assign the attribute
		document.getElementById("underLine").setAttribute("x2", _newX2);
	}
	
	if (_newX1 > newX1 && _newX2 > newX2){
		// If both X1 and X2 (from above) have hit their destinations, reset everything
		// Verify both are set properly
		document.getElementById("underLine").setAttribute("x2", newX2);
		document.getElementById("underLine").setAttribute("x1", newX1);
		currentX1 = newX1;
		currentX2 = newX2;
		cnt=0;
		clearInterval(timerFunction);
	}
}

function animateLeft() {
	
	cnt++; // Count each call into the animate function
	
	if (cnt > 5 && cnt <= 10) { 
		// If the call is less than the fifth time, don't do anything with x1.
		// Between 5 and 10 go moderate speed
		var _x2 = document.getElementById("underLine").getAttribute("x2");
		var _newX2 = parseInt(_x2) - slowSpeed;
		if (_newX2 >= newX2 || _x2 < newX2){ 
			document.getElementById("underLine").setAttribute("x2", _newX2);
		}
		 else {
				document.getElementById("underLine").setAttribute("x2", newX2);
			}
	} else if (cnt > 10) {
		// Greter than 10, give speed boost
		var _x2 = document.getElementById("underLine").getAttribute("x2");
		var speedBoost = slowSpeed * .1; // speedboost
		var _newX2 = parseInt(_x2) - (slowSpeed * speedBoost); // new position
		if (_newX2 >= newX2 || _x2 < newX2){ 
			// if we haven't hit the destination yet, assign the attribute
			document.getElementById("underLine").setAttribute("x2", _newX2);
		} else {
			document.getElementById("underLine").setAttribute("x2", newX2);
		}
	}
	
	// set up X1s new attribute
	var _x1 = document.getElementById("underLine").getAttribute("x1");
	var _newX1 = parseInt(_x1) - fastSpeed;
	
	if (_newX1 >= newX1 || _x1 < newX1) {
		// if we haven't hit the destination yet, assign the attribute
		document.getElementById("underLine").setAttribute("x1", _newX1);
	}
	
	if (_newX1 < newX1 && _newX2 < newX2){
		// If both X1 and X2 (from above) have hit their destinations, reset everything
		// Verify both are set properly
		document.getElementById("underLine").setAttribute("x2", newX2);
		document.getElementById("underLine").setAttribute("x1", newX1);
		currentX1 = newX1;
		currentX2 = newX2;
		cnt=0;
		clearInterval(timerFunction);
	}
}


function Proteomics() {
	// Need to move bar...
	if (currentX1 != secondX1) {
		// Make sure not trying to move to same place	
		if (currentX1 > secondX2) {
			// We are moving from Failed
			newX1 = secondX1;
			newX2 = secondX2;
			timerFunction = setInterval(animateLeft, 10);
			
			//var x1 = document.getElementById("underLine").getAttribute("x1");
		} else {
			// Moving from first
			newX1 = secondX1;
			newX2 = secondX2;
			timerFunction = setInterval(animateRight, 10);
		}
	}
    document.getElementById("SecondLabel").style.color = "#FFF";
	document.getElementById("FirstLabel").style.color = "#d0d9ff";
	document.getElementById("ThirdLabel").style.color = "#d0d9ff";
    Parse(proteomics);
}

function Genomics() {

		if (currentX1 != firstX1) {
		// Make sure not trying to move to same place	
			newX1 = firstX1;
			newX2 = firstX2;
			timerFunction = setInterval(animateLeft, 10);
	}
	
	document.getElementById("FirstLabel").style.color = "#FFF";
	document.getElementById("ThirdLabel").style.color = "#d0d9ff";
	document.getElementById("SecondLabel").style.color = "#d0d9ff";
    Parse(genomics);
}

function Opinion() {
	
	if (currentX1 != thirdX1) {
			newX1 = thirdX1;
			newX2 = thirdX2;
			timerFunction = setInterval(animateRight, 10);
	}
     document.getElementById("ThirdLabel").style.color = "#FFF";
		   document.getElementById("SecondLabel").style.color = "#d0d9ff";
		   document.getElementById("FirstLabel").style.color = "#d0d9ff";
            Parse(opinion);
}

function Menu(){
	
	   if( document.getElementById("nav").style.width>"0%"){closeMenu()}
	   else{
		   document.getElementById("nav").style.width="70%";
		   document.getElementById("menu").style.width="70%";
		   document.getElementById("nav").style.zIndex="999999999999999999";
		   document.getElementById("Process").style.position="fixed";

	   }

}

function closeMenu(){
    document.getElementById("nav").style.width="0%";
    document.getElementById("menu").style.width="0%";
    document.getElementById("Process").style.position="absolute";

	
}
function changeTabs(a,b,c){
	
    //------> change the tab label 
    document.getElementById("FirstLabel").innerHTML=a;
    document.getElementById("SecondLabel").innerHTML=b;
    document.getElementById("ThirdLabel").innerHTML=c;
}




function Cancel_Options(){
	$("cancel").style.display="none";
    $("options").style.display="none";
    var circles=document.getElementsByClassName('circle');
    var processes=document.getElementsByClassName('divtable');
    var inner=document.getElementsByClassName('processinner');
    for (i = 0; i < processes.length; i++) { 
        if (circles[i]!=null){circles[i].style.display="none";circles[i].style.background="none";}
    	  processes[i].style.marginLeft="auto";
          inner[i].style.pointerEvents="auto";
      }
    Checked_Process.length=0;
}

function Logout(){
 
  
}

function Select_Options(node,id){
	
    if ($("options").style.display!="none"){
        var circles=document.getElementsByClassName('circle');
        console.log(node,id);
        if (Checked_Process.indexOf(id) == -1){
             Checked_Process.push(id);
             circles[node].style.background="#3b50ce";
        }
        else if (Checked_Process.indexOf(id) != -1){
             var x = Checked_Process.indexOf(id);
             console.log(x);
             Checked_Process.splice(x,1);
             circles[node].style.background="none";
       }
    }
    
}

function Options(){
	$("Options").style.display="inline";
	$("Options").style.height="80%";
    $("Process").style.pointerEvents="none";
}

function Delete(callback){
    var url='qpbg_http://objRemove&raw=1&src=all&ids='+Checked_Process.join(',');
    dsOptions.reload(url, true);
   return true;
}

function ReturnHome(){
	 var url='qpbg_http://home';
	vjDS["dsProcesses"].reload(url, true);
}


function CloseOptions(){
	Cancel_Options();
    $("Options").style.height="0%";
    $("Options").style.display="none";
    $("Process").style.pointerEvents="auto";
}

function RemoveNotRemoved(){
	
	for (i = 0; i < Checked_Process.length; i++) { 
		$(Checked_Process[i]).style.display="none";
      }
}
function OnHome(){
    $("cancel").style.display="none";
    $("options").style.display="none";
    $("Options").style.display="none";
   
}
</script>
		<!-- <div id="CheckProcess" data-role="page" >
			<div data-role="header" > -->
<head></head>
<body onload="View()">
<div class="super" id="super">
	<div id="menu" style="position:absolute;width:0%;height:100%;z-index:99999999999999999999999999">
	  <div id="nav" class="nav">
			<ul>
				<li onclick="closeMenu()">Close</li>
				<li><a href="/usr/scott/tools/Pubcast+/Pubcast.html"> Refresh</a></li>
			 
			</ul> 
		</div>
	</div>
	<div id="topdiv" class="top">
		<div id="seconddiv" class="header">
		    <a href="/usr/scott/tools/Pubcast+/Pubcast.html">
			     <img src="img/hive_logo_mobile_beta.png" width="110px" height="36px" class="ui-btn-left header-hivelogo" style="margin-left: 5px" />
			 </a>
			<div id="hamburger" onclick="Menu()">
				<div></div>
				<div></div>
				<div></div>
			</div>
			
			<!-- header -->

		</div>

		<div id="First" class="tabs" onclick="Genomics()">
			<input id="First" type="radio" name="Left" /> <label for="First" id="FirstLabel">Genomics</label>
			<div id="tab1" class="rectangle"></div>
		</div>

		<div id="Second" class="tabs" onclick="Proteomics()">
			<input id="Second" type="radio" name="Middle"/> <label for="Second" id="SecondLabel">Proteomics</label>
			<div id="tab2" class="rectangle" style="visibility: hidden">
			</div>
		</div>


		<div id="Third" class="tabs" onclick="Opinion()">
			<input id="Third" type="radio" name="Right" /> <label for="Third" id="ThirdLabel">Opinion</label>
			<div id="tab3" class="rectangle" style="visibility: hidden">
			</div>
		</div>
		
		<!--  <div id = "topBottomSVG" > --> 
			<svg width="100%" height = "6" id = "topBottomSVG">
				<line id="underLine" x1="2" y1="1" x2="1" y2 = "1" style="stroke:rgb(254,205,64);stroke-width:6" >
					<!-- <animate attributeType="xml" attributeName="x2" from="200" to="500" dur="1s" begin="5s" fill="freeze" />
					<animate attributeType="xml" attributeName="x1" from="2" to="300" dur="1s" begin="5s" fill="freeze" /> -->
				</line>
			</svg>
		

	</div>
	
	<div id =titlecontainer" style="padding-top:20%">
	   <div id =title class="divtable" style="display:none;padding-left:5%;padding-right:5%">
	       
	      </div>
	   </div>
	<br />
	<form id="form" name="form"> 

<div id= "Wrapper"class="tableWrapper" >
<div id="Process" style="width: 100%; overflow-x:hidden" name="Process">
</div>
</div>
	</form>
</div>
</div>
</body>
</html>


